<div class="ui-popup sign-up mfp-anim">
  <div class="ui-popup-title">
    Подписаться на уведомления
  </div>

  <div class="ui-popup-subtitle">
    Вы получите SMS-уведомление о поступлении данного товара на указанный ниже номер.
  </div>

  <div class="ui-popup-form">
    <form action="#" class="ui-popup-validate">
      <div class="ui-popup-field">
        <input autocomplete="off" type="text" class="ui-input label popup" name="phone" id="phone">
        <label class="ui-label">Номер телефона</label>
      </div>

      <button class="ui-btn margin-0">Подписаться на товар</button>
    </form>
  </div>

  <script>
    $(document).ready(function () {
      labelForInput('.ui-popup .ui-input.label')

      $(".ui-popup-validate").validate({
        errorElement: "span",

        rules: {
          phone: {
            required: true,
            minlength: 19,
            phoneNumber: true
          },
        },

        messages: {
          phone: {
            required: "Пожалуйста, введите данные",
            minlength: "Введите полный номер",
          },
        }
      });

      jQuery.validator.addMethod("phoneNumber", function (value, element) {
        if (!value.match('_')) {
          return element.value === value
        }

      }, "Введите корректный номер");

      let phone = document.getElementById('phone')

      if (phone) {
        phone.addEventListener('focus', function () {
          mask = IMask(this, {
            mask: '+{375} (00) 000-00-00',
            overwrite: true,
            lazy: false,
            placeholderChar: '_',
          });
        })
      }
    });
  </script>
</div>